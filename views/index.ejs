<html lang="en">
<%- include("./partials/head.ejs") %>


<body>
  <%- include("./partials/nav.ejs") %>
  <!-- <p> <%=buHafta %></p> -->
  <div id="filtreler">
    <select id="haftaSec" autocomplete="off" onChange="window.location.href=this.value">
        <option value="/">Hafta Seç</option>
        <% if (haftalar.length > 0) { %>
          <% haftalar.forEach(hafta => { %>
            <% if (buHafta==hafta){ %>
              <option value= "/hafta/<%=hafta %>" selected %>><%= hafta %></option>
            <% } else {%>
              <option value= "/hafta/<%=hafta %>" %>><%= hafta %></option>
            <% } %>
          <% }) %>
        <% } %>
    </select>
    <select id="yazarSec" autocomplete="off" onChange="window.location.href=this.value">
        <option value="/">Yazar Seç</option>
        <% if (yazarlar.length > 0) { %>
          <% yazarlar.forEach(yazar => { %>
            <% if (buYazar==yazar){ %>
              <option value= "/yazar/<%=yazar %>" selected%>><%= yazar %></option>
            <% } else {%>
              <option value= "/yazar/<%=yazar %>" %>><%= yazar %></option>
            <% } %>
          <% }) %>
        <% } %>
    </select>
    <button onclick="location.href='/rastgele';" >Rastgele!</button>
  </div>
  <p id="sayiMetin"></p>
  <div class="blogs content" id="mainTableContainer">
    <!-- <h2>Bütün Öyküler</h2> -->
    <% if (oykuler.length > 0) { %>
    <table id="oykuTablosu">
      <tr>
        <th>
          Öykü
        </th> 
        <th>
          Yazar
        </th>
        <th id="haftaBaslik" onclick="siralamaDegistir()">
          Hafta ▲
        </th>
      </tr>
      <% oykuler.forEach(oyku => { %>
        <tr>
          <td>
            <a href=<%=oyku.link %>>
              <%= oyku.baslik %>
            </a>
          </td>
          <td>
            <a href="/yazar/<%=oyku.yazar %>">
              <%= oyku.yazar %>
            </a>
          </td>
          <td>
            <a href="/hafta/<%=oyku.hafta %>">
             Hafta <%= oyku.hafta %>
            </a>
          </td>
        </tr>
      <% }) %>
    </table>
    <% } else { %>
      <p>Veritabanı boş...</p>
    <% } %>

  </div>


  <%- include("./partials/footer.ejs") %>
</body>

<script src="script_index.js" defer></script>
</html>